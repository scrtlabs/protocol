

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Appendix &mdash; Enigma Protocol 0.1 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="_static/css/theme_overrides.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="Enigma Protocol 0.1 documentation" href="index.html"/>
        <link rel="prev" title="License" href="License.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        

        
          <a href="index.html" class="icon icon-home"> Enigma Protocol
        

        
        </a>

        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="BasicIntroduction.html">Basic Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="BasicIntroduction.html#how-enigma-works">How Enigma Works</a></li>
<li class="toctree-l2"><a class="reference internal" href="BasicIntroduction.html#the-enigma-testnet-what-s-inside">The Enigma Testnet - What’s Inside?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="TechnicalIntroduction.html">Technical Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="TechnicalIntroduction.html#how-enigma-works">How Enigma Works</a></li>
<li class="toctree-l2"><a class="reference internal" href="TechnicalIntroduction.html#the-enigma-testnet-what-s-inside">The Enigma Testnet - What’s Inside?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="HowToUseThisDocumentation.html">How to use this Documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="HowToUseThisDocumentation.html#getting-hands-on-with-the-code">Getting Hands-on with the Code</a></li>
<li class="toctree-l2"><a class="reference internal" href="HowToUseThisDocumentation.html#understanding-the-enigma-protocol">Understanding the Enigma Protocol</a><ul>
<li class="toctree-l3"><a class="reference internal" href="HowToUseThisDocumentation.html#high-level-information">High-level information</a></li>
<li class="toctree-l3"><a class="reference internal" href="HowToUseThisDocumentation.html#low-level-information">Low-level information</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="HowToUseThisDocumentation.html#learning-about-enigma-s-encryption">Learning about Enigma’s Encryption</a></li>
<li class="toctree-l2"><a class="reference internal" href="HowToUseThisDocumentation.html#enigma-use-cases">Enigma Use-Cases</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="AboutThisRelease.html">About this Release</a><ul>
<li class="toctree-l2"><a class="reference internal" href="AboutThisRelease.html#selected-features-of-this-release">Selected features of this release</a></li>
<li class="toctree-l2"><a class="reference internal" href="AboutThisRelease.html#assumptions-made-in-this-testnet-release">Assumptions made in this testnet release</a></li>
<li class="toctree-l2"><a class="reference internal" href="AboutThisRelease.html#on-rust">On Rust</a></li>
<li class="toctree-l2"><a class="reference internal" href="AboutThisRelease.html#on-sgx">On SGX</a></li>
<li class="toctree-l2"><a class="reference internal" href="AboutThisRelease.html#on-coupling-with-ethereum">On Coupling with Ethereum</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="GettingStarted.html">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="GettingStarted.html#frequently-asked-questions">Frequently Asked Questions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="GettingStarted.html#hardware-and-software-mode-what-s-the-difference">Hardware and software mode - what’s the difference?</a></li>
<li class="toctree-l3"><a class="reference internal" href="GettingStarted.html#how-do-i-know-if-my-system-has-an-sgx-enabled-cpu">How do I know if my system has an SGX-enabled CPU?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="GettingStarted.html#testnet-limitations">Testnet Limitations</a></li>
<li class="toctree-l2"><a class="reference internal" href="GettingStarted.html#system-requirements">System Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="GettingStarted.html#setting-up-the-testnet">Setting up the Testnet</a></li>
<li class="toctree-l2"><a class="reference internal" href="GettingStarted.html#deploying-the-network">Deploying the Network</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="SecretContracts.html">Writing a Secret Contract</a><ul>
<li class="toctree-l2"><a class="reference internal" href="SecretContracts.html#example-01-the-millionaires-problem">Example 01: The Millionaires Problem</a></li>
<li class="toctree-l2"><a class="reference internal" href="SecretContracts.html#example-02-secret-auctions">Example 02: Secret Auctions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="SecretContracts.html#how-it-works">How it Works</a></li>
<li class="toctree-l3"><a class="reference internal" href="SecretContracts.html#breaking-down-the-code">Breaking Down the Code</a></li>
<li class="toctree-l3"><a class="reference internal" href="SecretContracts.html#the-contract-state">The Contract State</a></li>
<li class="toctree-l3"><a class="reference internal" href="SecretContracts.html#the-bidding-process">The Bidding Process</a></li>
<li class="toctree-l3"><a class="reference internal" href="SecretContracts.html#post-auction-callable-and-callback">Post-Auction: Callable and Callback</a></li>
<li class="toctree-l3"><a class="reference internal" href="SecretContracts.html#post-auction-withdrawls">Post-Auction: Withdrawls</a></li>
<li class="toctree-l3"><a class="reference internal" href="SecretContracts.html#design-considerations">Design Considerations</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="CreateReactFrontend.html">Creating a React Front-End</a><ul>
<li class="toctree-l2"><a class="reference internal" href="CreateReactFrontend.html#conclusion">Conclusion</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="SystemDesign.html">System Design</a><ul>
<li class="toctree-l2"><a class="reference internal" href="SystemDesign.html#enigma-js-client-library">Enigma-JS Client Library</a></li>
<li class="toctree-l2"><a class="reference internal" href="SystemDesign.html#enigma-contract">Enigma Contract</a><ul>
<li class="toctree-l3"><a class="reference internal" href="SystemDesign.html#tracking-of-computation-tasks">Tracking of Computation Tasks</a></li>
<li class="toctree-l3"><a class="reference internal" href="SystemDesign.html#events">Events</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="SystemDesign.html#principal-node">Principal Node</a></li>
<li class="toctree-l2"><a class="reference internal" href="SystemDesign.html#enigma-node">Enigma Node</a></li>
<li class="toctree-l2"><a class="reference internal" href="SystemDesign.html#surface">Surface</a></li>
<li class="toctree-l2"><a class="reference internal" href="SystemDesign.html#core">Core</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="NetworkTopology.html">Network Topology</a></li>
<li class="toctree-l1"><a class="reference internal" href="SoftwareArchitecture.html">Software Architecture</a><ul>
<li class="toctree-l2"><a class="reference internal" href="SoftwareArchitecture.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="SoftwareArchitecture.html#subsystem-decomposition">Subsystem Decomposition</a></li>
<li class="toctree-l2"><a class="reference internal" href="SoftwareArchitecture.html#logical-components">Logical Components</a></li>
<li class="toctree-l2"><a class="reference internal" href="SoftwareArchitecture.html#mapping-between-subsystems-and-logical-components">Mapping Between Subsystems and Logical Components</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="SubsystemArchitecture.html">Subsystem Architecture</a><ul>
<li class="toctree-l2"><a class="reference internal" href="SubsystemArchitecture.html#registration">Registration</a></li>
<li class="toctree-l2"><a class="reference internal" href="SubsystemArchitecture.html#client-encryption-and-storage">Client Encryption and Storage</a></li>
<li class="toctree-l2"><a class="reference internal" href="SubsystemArchitecture.html#worker-selection">Worker Selection</a></li>
<li class="toctree-l2"><a class="reference internal" href="SubsystemArchitecture.html#computation">Computation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="SubsystemArchitecture.html#payment-of-the-computation-fee">Payment of the Computation Fee</a></li>
<li class="toctree-l3"><a class="reference internal" href="SubsystemArchitecture.html#deserialization-and-decryption">Deserialization and Decryption</a></li>
<li class="toctree-l3"><a class="reference internal" href="SubsystemArchitecture.html#preprocessing">Preprocessing</a></li>
<li class="toctree-l3"><a class="reference internal" href="SubsystemArchitecture.html#execution-in-evm">Execution in EVM</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="SubsystemArchitecture.html#on-chain-verification">On-Chain Verification</a><ul>
<li class="toctree-l3"><a class="reference internal" href="SubsystemArchitecture.html#after-each-new-epoch">After Each New Epoch</a></li>
<li class="toctree-l3"><a class="reference internal" href="SubsystemArchitecture.html#post-computation">Post Computation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="SubsystemArchitecture.html#attestation">Attestation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Enigma-js.html">Enigma-JS</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Enigma-js.html#validatekeyhex"><strong>validateKeyHex</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="Enigma-js.html#getderivedkey"><strong>getDerivedKey</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="Enigma-js.html#encryptmessage"><strong>encryptMessage</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="Enigma-js.html#getpublickey"><strong>getPublicKey</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="Enigma-js.html#removetrailing0x"><strong>removeTrailing0x</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="Enigma-js.html#recoverpubkey"><strong>recoverPubKey</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="Enigma-js.html#verifysignature"><strong>verifySignature</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="Enigma-js.html#selectworker"><strong>selectWorker</strong></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Community.html">Community</a></li>
<li class="toctree-l1"><a class="reference internal" href="Glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="License.html">License</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Appendix</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#cryptography">Cryptography</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#elliptic-curve">Elliptic Curve</a></li>
<li class="toctree-l3"><a class="reference internal" href="#signing">Signing</a></li>
<li class="toctree-l3"><a class="reference internal" href="#encryption">Encryption</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#implementation">Implementation</a></li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Enigma Protocol</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Appendix</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/Appendix.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="appendix">
<h1>Appendix<a class="headerlink" href="#appendix" title="Permalink to this headline">¶</a></h1>
<p>Additional reference materials for further reading.</p>
<div class="section" id="cryptography">
<span id="id1"></span><h2>Cryptography<a class="headerlink" href="#cryptography" title="Permalink to this headline">¶</a></h2>
<p>The enclaves in the Enigma protocol use public-key cryptography, also known as
asymmetrical cryptography, which use a pair of keys: a public key that may be
disseminated widely, and a private key that is known only to the enclave. This
accomplishes two functions: <strong>authentication</strong>, where the public key verifies
that a holder of the paired private key sent the message, and <strong>encryption</strong>,
where only the paired private key holder can decrypt the message encrypted with
the public key.</p>
<p>Within the realm of public-key cryptography, Enigma uses elliptic curve (EC)
cryptography, which provide smaller key sizes and faster operations for
approximately equivalent estimated security.</p>
<div class="section" id="elliptic-curve">
<h3>Elliptic Curve<a class="headerlink" href="#elliptic-curve" title="Permalink to this headline">¶</a></h3>
<p>The Enigma Protocol uses the <strong>secp256k1</strong> curve for both signing and encryption
keys, as it’s standard in Bitcoin/Ethereum (but the keys themselves should not
be the same). secp256k1 is not considered a safe curve, but it’s unclear if that
opens any vector of attack, and it’s good enough for Bitcoin/Ethereum.
(<a class="reference external" href="https://safecurves.cr.yp.to">SafeCurves</a>, all the attacks here on secp256k1
are theoretical only.)</p>
<p>secp256k1 was constructed in a special non-random way that allows for especially
efficient computation. As a result, it is often more than 30% faster than other
curves if the implementation is sufficiently optimized. Also, unlike the popular
NIST curves, secp256k1’s constants were selected in a predictable way, which
significantly reduces the possibility that the curve’s creator inserted any sort
of backdoor into the curve.</p>
<p>Alternatives:
Cardano/Ouroborous uses <strong>secp256r1</strong> curve for ECDSA, though we see no good
reason to use <strong>secp256r1</strong>, as it has the almost the same security as
<strong>secp256k1</strong>. The only difference is that <strong>secp256k1</strong> uses the “Koblitz
curve” which means there is less chance for backdoors (because the constants
aren’t random). If at some point we don’t need compatibility with
bitcoin/ethereum then he should use something like <strong>Curve25519</strong> which is
considered to be a “safe curve”.</p>
</div>
<div class="section" id="signing">
<h3>Signing<a class="headerlink" href="#signing" title="Permalink to this headline">¶</a></h3>
<p>For signing, the Enigma Protocol uses <strong>Elliptic Curve Digital Signature
Algorithm</strong> (ECDSA) with <strong>keccak256</strong> as the hashing function(for compatibility
with ethereum’s solidity), a variant of the Digital Signature Algorithm that
uses elliptic curve cryptography. ECDSA is used by most blockchains.</p>
</div>
<div class="section" id="encryption">
<h3>Encryption<a class="headerlink" href="#encryption" title="Permalink to this headline">¶</a></h3>
<p>For encryption, the Enigma Protocol uses an adaptation of <strong>Elliptic Curve
Diffie-Hellman</strong> (ECDH), an anonymous key agreement protocol that allows two
parties to establish a shared secret over an insecure channel.</p>
<p>The enclave can make their public key known a priori. Any user that wants to
encrypt a message for the enclave can generate a one-time asymmetric key-pair,
and use that to derive a one-time symmetric key as in the usual ECDH protocol.
The one-time symmetric key is generated with a key derivation function (KDF)
that is yet to be specified. The symmetric-key algorithm used for encryption
is most likely <strong>Advanced Encryption Standard</strong> (AES) with the <strong>GCM</strong> mode
(<strong>Galois/Counter Mode</strong>) to add HMAC(Hash-based Message Authentication Code) to
add message authentication to the encrypted message and to protect against a
number of known vector attacks of AES. The encryption is used with a key length
of 256 bits.</p>
<p>Now, the user can use that secret to encrypt a message, and send to the enclave
both the encrypted message, and the public key it used. With that information,
the enclave can derive the symmetric key and decrypt the message.</p>
<p>(Side note: if we want authentication as well, we may need to sign these
messages as well, but that’s to be determined. I don’t think we care much about
users authenticating towards the enclaves.)</p>
<p><em>Elliptic Curve Integrated Encryption Scheme</em> (ECIES) was also considered as an
option for encryption, while being similar to ECDH. The reason to prefer ECDH
over ECIES is because ECIES isn’t standardized yet, it doesn’t add much security
to the protocol, and because it isn’t standardized yet most of the known
cryptography libraries doesn’t implement it. (which also means it wasn’t tested
enough).</p>
</div>
</div>
<div class="section" id="implementation">
<h2>Implementation<a class="headerlink" href="#implementation" title="Permalink to this headline">¶</a></h2>
<p>For the PoC, the Enigma Protocol implements all the above cryptographic
algorithms in Python using the <a class="reference external" href="https://cryptography.io/en/latest/">pyca/cryptography</a>
package. The Enigma implementation of the cryptographic primitives can be found
in the core repository: <a class="reference external" href="https://github.com/enigmampc/core/tree/develop/src/core/cryptography">core/src/core/cryptography</a> (develop branch).</p>
<p>In the near future we may move to a C/C++ library that is compatible with the
SGX implementation to be run natively inside an SGX enclave. The implementation
under consideration is <a class="reference external" href="https://github.com/weidai11/cryptopp">Crypto++</a>, a
free C++ class library of cryptographic schemes that includes all the algorithms
outlined above.</p>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="License.html" class="btn btn-neutral" title="License" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018 Enigma MPC, Inc.
    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>